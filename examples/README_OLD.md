[TOC]
## 简介
整个项目其实是一个学习的过程，如果能实现不用上班就更好了。
## 前端技术
~~Vue(Quasar) + Echarts~~

~~暂时采用这个架构，Github上找一个开源的魔改~~

现在改用Flutter进行跨平台开发？还是用QT？
## 后端技术
先拿Python写吧，回头遇到效率问题了再换CPP
## 1. 获取数据
### 1.1. 数据种类
- 分钟级交易数据
- 3min、5min、15min交易数据
- 公司财务数据
- 新闻舆情
### 1.2. 数据来源
- baostock
- DTShare（试一试）
- tushare（要求太高后面再说）
- **新浪财经**
    - 1 User-Agent, ( 0 , 1 ) Sleep，1 IP:67 被ban
    - 3 User-Agent, ( 0 , 1 ) Sleep，1 IP:64 被ban
    - 6 User-Agent, ( 0 , 1 ) Sleep，1 IP:66 被ban
    - 12 User-Agent, ( 0 , 1 ) Sleep，1 IP:69 被ban
    
- 腾讯财经
- 东方财富
- 雅虎财经 http://finance.yahoo.com
- 谷歌财经 https://www.google.com/finance
- QuantQuote https://www.quantquote.com（S&P500 EOD data only）
- EODDate http://eoddata.com（requires registration）
- Quandl www.quandl.com
### 1.3. 获取方法
- 爬虫
- 免费API
- 付费API
### 1.4. 数据清洗
## 2. 数据分析挖掘
### *2.1. 模型构建*
- 大类资产配置模型
根据大类资产决定股票和债券的投资比例
- 行业模型
按照行业配置模型确定超配和低配行业
- 股票模型
依靠股票模型挑选股票
### 2.2. 定量投资的核心思想
包括宏观周期、市场结构、估值、成长、盈利质量、分析师盈利预测、市场情绪等维度。
### 2.3. 常用统计方法
#### 2.3.1. 相似度计算
- 基于欧几里得距离的相似度计算
```math
d = \sqrt{(x_1 - x_2)^2 + (y_1 - y_2)^2}
```
该值表示两个物体或用户差异性大小，即用户的相似性，d越小相似度越大，实际中往往使用欧几里得距离的倒数作为相似度计算的近似值，即1/（d+1）作为近似值。

- 基于余弦角度的相似度计算
与欧几里得角度类似，换成了极坐标系。
```math
cos\alpha = {\sum(x_i * y_i)\over\sqrt{\sum(x_i^2)} * \sqrt{\sum(y_i^2)}}
```
- 欧几里得相似度注重表现不同目标的绝对差异性，余弦相似度更多的是对目标的趋势上进行区分。

#### 2.3.2. 数据标准化
- 0-1 标准化
0 - 1 标准化也叫离差标准化，对原始数据进行线性变换，使结果落到 [0,1] 区间内。
这种方法有个缺陷，当有新数据插入时，max或min可能需要更新，整个函数需要重新计算。
```math
X = {{x-min}\over{max-x}}
```
- Z-score标准化
Z-score标准化也叫标准差标准化，经过处理的数据符合标准正态分布，即均值为0，标准差为1。
```math
X = {{x-\mu}\over{\sigma}}
```
$\mu$为所有采样数据的均值，$\sigma$为所有采样数据的标准差
一般情况下，通过数据的标准化处理后，数据最终落在 [-1 , 1]的概率为99.7%，而在（-1，1） 之外的数据被设置成-1和1，以便处理。
#### 2.3.3. 数据平行化处理
- 平行坐标
平行坐标为了表示在高维空间的一个点集，在N条平行的线的背景下（一般这N条线都竖直且等距），一个高维度空间的点被表示为一条拐点在N条平行坐标轴的折线，在第K个坐标轴上的位置就表示这个点在第K维的值。
![75cd5c9127022c4b6afaceead2259671.png](evernotecid://C1662258-E49D-4F3C-8D3B-2E09013AF159/appyinxiangcom/18639188/ENResource/p1911)
- 热点图-属性相关性监测
![b98aa7cb72a5b7be85200000dccfa434.png](evernotecid://C1662258-E49D-4F3C-8D3B-2E09013AF159/appyinxiangcom/18639188/ENResource/p1912)
#### 2.3.4. 时间序列
- ADF test 判断是否随机游走模型
- Hrust Exponent

$(|(log(t + \tau)-log(t)|^2)$ ~ $\tau^{2H}$
    - H<0.5 The time series is mean reverting
    - H=0.5 The time series is a Geometric Brownian Motion
    - H>0.5 The time series is trending

## 3. 构建策略
### 3.1. 因子
#### 3.3.1. 3日、7日、15日均线
#### 3.3.2. EMA
EMA是指数平均数指标，也叫EXPMA指标，是一种趋向类指标，是以指数式递减加权的移动平均。
```math
EMA = \alpha * Price_n + (1-\alpha) * (Price_{n-1})
```
$\alpha$为平滑指数，一般取 2 / ( n + 1 )
#### 3.3.3. MACD
- MACD称为指数平滑移动平均线，是金融分析指标中常用的一个数据指标，用于对股票趋势的分析。
- MACD的意义与双移动平均线基本相同，即由快、慢均线的离散、聚合表征当前的多空状态和股价可能的发展变化趋势。
- 当MACD由负转正时，是买的信号。
- 当MACD由正转负时，是卖的信号。
- 当MACD以大角度变化时，表示快的移动均线和慢的移动均线的差距非常迅速的拉开，代表一个市场大趋势的转变。


#### 3.3.4. SMA_CN
#### 3.3.5. RSI_CN
#### 3.3.6. KDJ_CN
#### 3.3.6. 平均趋向指数ADX和累积派发线AD
AD（累积派发线）是一种平衡交易量指标，以当日的收盘价位来估算成交流量，用于估算一段时间内该证券累积的资金流量。通常与ADX一起使用，利用多空趋向的变化差离与总和判定平均趋势，ADX数值不能显示趋势的发展方向。但是如果趋势存在，ADX可以**衡量趋势的强度**。
AD为资金趋势函数，向上的A/D表示买方占优势，而向下的A/D表示卖方占优势。
#### 3.3.7. ADOSC震荡指标
ADOSC将资金流动情况与价格行为相对比，监测市场中资金流入和流出情况。
#### 3.3.8. ATR平均真实波幅
ATR主要用来衡量价格的波动。因此，这一技术指标并不能直接反映价格走向及其趋势的稳定性，只是表明价格波动的程度。
#### 3.3.9. OBV能量潮
OBV通过统计成交量变动的趋势推测股价趋势，它以某日为基期，逐日累计每日上市股票总成交量，若隔日指数或股票上涨，则基期OBV加上本日成交量为本日OBV。若隔日指数或股票下跌，则基期OBV减去本日成交量为本日OBV。
#### 3.3.10. BOLL布林线指标
- 布林线利用统计原理求出股价的标准差及其信赖区间，从而确定股价的波动范围及未来走势，利用波带显示股价的安全高低价位。其上下限范围不固定，随股价的滚动而变化。
- 布林指标和麦克（MIKE）指标一样属于路径纸币哦啊没股价波动在上限和下限的区间之内，这条带状区的宽窄随着股价波动幅度的大小而变化，股价涨跌幅度加大时，带状区变宽，涨跌幅度狭小盘整时，带状区变窄。

    
## 4. 回测
基于zipline定制化开发
## 5. 策略分析（巴菲特理念、趋势投机、超短、资金流、董事长）
#### 5.1. 策略来源
- 市场微观结构研究（for HFT mostly）
- 基金结构套利（fund structure arbitrage）
- 机器学习/人工智能
#### 5.2. Dual Thrust策略
- 开盘区间突破类交易系统，以今日开盘价加/比例的昨日振幅确定上下轨，日内突破上轨时平空做多，突破下轨时平多做空。
![f2d3ab5b2ed910fe2c078a401f1a72ae.png](evernotecid://C1662258-E49D-4F3C-8D3B-2E09013AF159/appyinxiangcom/18639188/ENResource/p1913)
- Dual Thrust在形式上和传统的区间突破类似，不同点主要体现在以下两个方面
    - Dual Thrust在Range的设定上，针对不同的标的引入前若干天的4个价位，使得一定时期内的Range相对稳定，可以适用于日间的趋势跟踪。
    - Dual Thrust 对于不同的趋势最总设置了不同的上轨和下轨，这里主要引入两个参数$K_1$与$K_2$，当$K_1 < K_2$时，买点相对容易被触发.当$K_1 > K_2$时，卖点相对容易被触发。
    - 使用该策略时，一方面可以参考历史数据测试的最优参数，另一方面可以根据自己对后势的判断，或从其他大周期的技术指标入手，阶段性地动态调整$K_1$与$K_2$的值。

#### 5.3. Dynamic Breakout 2 策略
- 这是一种动态自适应策略，这种系统的参数回依据市场当前的状况而自行调整。
- 传统的轨道线采用固定比率的价格差值来计算轨道的上下阈值。这样便于计算，可以获得一个稳定的计算公式。但是采样区间的选取是比较困难的，如果采样区间太短，那么趋势比较明显的情况下回表现优秀，信号对于入场和出场的展示比较紧密。但是采样区间太短会因为信号过于敏感而使其出现得比较频繁。
- 在趋势不明显的市场中，采样区间设置短会使得信号出现过多。一个较好的解决办法是把采样区间设置的更长一些，使信号出现得不那么频繁。但是对参数进行调整并不是那么简单的一件事
- Dynamic Breakou 2 策略采用动态自适应的方法，根据市场的波动作为衡量的标准。在震荡幅度较大的市场中，波动率自然而然较大，需要增加采样区间的值，这样不容易反复出现买卖点信号，而在趋势稳定的市场中，市场有较为明显的走势，波动率会随之变小，因此要减少采样区间的值，使得信号的出现较为敏感。
- Dynamic Breakout2 策略最重要的是波动率的计算。这个波动率的计算方式为
    - 计算当日的标准差
    - 计算上一个交易日的标准差
    - 根据公示
```math
deltaVolatility = {(todayVolatility - yesterDayVolatility)\over todayVolatility}
```
#### 多因子策略
- 规模因子：小市值因子
市值越小，其操纵涨跌所需要的资金越少，股票呗操纵的可能性就越大。
- 技术因子：动量反转因子
单个标的的涨跌幅度的反转效应明显。长得多了就要跌，跌得多了就要涨，远离要回归，价格归于价值。即股市里说的补涨补跌。
- 预测因子：预测收入的因子
预测因子指的是能够预测下一个财务周期的各种因子。
    - 规模因子：如总市值、流通市值、自由流通市值。
    - 估值因子：如市盈率（TTM）、市净率、市销率、市现率、企业价值倍数。
    - 成长因子：如营业收入同比增长率、营业利润同比增长率、归属于母公司的近利润同比增长率、经营活动产生的现金流金额同比增长率。
    - 盈利因子：如净资产收益率（ROE）、总资产报酬率（ROA）、销售毛利率、销售净利率
    - 动量反转因子：如前一个月涨跌幅、前2个月涨跌幅、前3个月涨跌幅、前6个月涨跌幅
    - 交投因子：如一个月日均换手率
    - 波动因子：如前一个月的波动率、前一个月的振幅
    - 股东因子：如户均持股比例、户均持股比例变化、机构持股比例变化
    - 一致性预测因子：如研报或者分析师预测当你净利润增长率，主营业务收入增长率、最近一个月预测净利润上调幅度、最近一个月预测主营业务收入上调幅度、最近一个月上调评级占比

## 6. 模拟交易
~~Interactive Broker账号已经注册~~
先在Interactive Broker模拟盘上试验
## 7. 实盘交易