[pytest]
# Pytest configuration for Ginkgo quantitative trading library
# Configuration for test discovery, markers, and reporting

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for categorizing tests
markers =
    unit: Unit tests (fast, isolated, no external dependencies)
    integration: Integration tests (slower, may require external services)
    tdd: TDD (Test-Driven Development) phase tests
    fixtures: Test fixtures and factory tests
    financial: Financial calculation and precision tests
    slow: Slow-running tests that may be skipped in CI/CD
    database: Database-related tests
    db_cleanup: Tests that need database cleanup
    skipif: Conditional test execution
    protocol_compliance: Protocol interface compliance tests
    mixin_functionality: Mixin functionality tests
    enhanced_financial: Enhanced financial precision tests
    trading_scenario: Quantitative trading scenario tests
    framework_enhancement: Framework enhancement tests
    events: Event system tests
    construction: Construction and initialization tests
    properties: Property access tests
    time_handling: Time handling tests
    identification: Identification tests
    price_update: Price update event tests
    capital_update: Capital update event tests
    order_related: Order related event tests
    edge_cases: Edge case tests
    backtest: Backtest related tests
    live: Live trading tests
    analyzer: Analyzer tests
    notifier: Notifier tests
    infrastructure: Infrastructure tests
    data_con: Data connection tests
    position: Position tests
    order: Order tests
    component_collaboration: Component collaboration integration tests
    poc: Proof of concept tests
    protocol: Protocol interface tests
    lab: Lab/experimental tests
    strategy: Strategy related tests
    complete_chain: Complete chain integration tests
    performance_stress: Performance stress tests
    real_world_scenarios: Real world scenario tests
    backtest_validation: Backtest validation tests
    risk: Risk management tests
    init: Initialization tests
    selector: Selector tests
    sizer: Sizer tests
    feeder: Feeder tests
    performance: Performance benchmark tests
    quality: Code quality tests
    network: Network connectivity tests
    benchmark: Benchmark tests
    kafka: Kafka integration tests
    critical: Critical tests that must pass
    data_management: Data management tests
    data_consistency: Data consistency tests
    statistics: Statistics calculation tests
    template_methods: Template method pattern tests
    error_handling: Error handling and resilience tests
    deprecation: Deprecation warning tests
    time_management: Time management tests
    compatibility: Compatibility tests
    asyncio: AsyncIO tests for async/await code

# Test paths
testpaths = test

# Output options
addopts =
    -v
    --strict-markers
    --tb=short

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Minimum version
minversion = 7.0

# Timeout configuration (in seconds)
timeout = 300

# Console output style
console_output_style = progress

# Python paths (for test imports)
pythonpath = .
    src

# Coverage configuration (for pytest-cov plugin)
[coverage:run]
source =
    ginkgo.trading
    ginkgo.data
    ginkgo.enums
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */site-packages/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if TYPE_CHECKING:
